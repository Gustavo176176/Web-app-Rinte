<!--Para não estar a repetir a informação sobre a barra lateral, elaborei uma base para apenas chamá-la nos outros ficheiros-->

{% load static %}
<!DOCTYPE html>
<html lang="pt">
<head>
    <meta charset="UTF-8">
    <title>Gestão de Consumos</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <style>
        body { background-color: #f0f2f5; font-family: 'Segoe UI', sans-serif; }
        .sidebar { width: 250px; height: 100vh; position: fixed; background: #2c3e50; color: white; display: flex; flex-direction: column; padding: 20px 0; z-index: 1000; }
        .sidebar a { padding: 15px 25px; color: #b0b0b0; text-decoration: none; border-left: 4px solid transparent; transition: 0.2s; }
        .sidebar a:hover, .sidebar a.active { background: #34495e; color: white; border-left-color: #0d6efd; }
        .main-content { margin-left: 250px; padding: 30px; }
        .card-hover:hover { transform: translateY(-3px); transition: 0.3s; }
    </style>
</head>
<body>


    <nav class="sidebar">
        <div class="text-center mb-4 px-2">
            <h5 class="fw-bold"><i class="fas fa-bolt text-warning"></i> Monitorize os seus Consumos</h5>
            
            <small class="opacity-75">
                Olá, {% if user.first_name %}
                    {{ user.first_name }}
                {% else %}
                    {{ user.username|default:"nome" }}
                {% endif %}
            </small>
        </div>
        <!--Barra lateral,se uma for escolhida, fica "active"-->
        <a href="{% url 'dashboard' %}" 
           class="{% if request.resolver_match.url_name == 'dashboard' %}active{% endif %}"
        >
            <i class="fas fa-home me-2"></i> Visão Geral
        </a>
        <a href="{% url 'lista_dispositivos' %}" 
           class="{% if 'dispositivo' in request.resolver_match.url_name %}active{% endif %}"
        >
            <i class="fas fa-plug me-2"></i> Dispositivos
        </a>
        <a href="{% url 'registar_consumo' %}" 
           class="{% if 'consumo' in request.resolver_match.url_name %}active{% endif %}"
        >
            <i class="fas fa-edit me-2"></i> Registar Consumos
        </a>
        <a href="{% url 'lista_fornecedores' %}" 
           class="{% if 'fornecedor' in request.resolver_match.url_name %}active{% endif %}"
        >
            <i class="fas fa-handshake me-2"></i> Fornecedores
        </a>
        <a href="{% url 'relatorios' %}" 
           class="{% if 'relatorio' in request.resolver_match.url_name %}active{% endif %}"
        >
            <i class="fas fa-chart-line me-2"></i> Relatórios
        </a>
        <a href="{% url 'definicoes' %}" 
           class="{% if request.resolver_match.url_name == 'definicoes' %}active{% endif %}"
        >
            <i class="fas fa-cog me-2"></i> Definições
        </a>
        <div style="position: absolute; bottom: 20px; width: 100%;">
            <form action="{% url 'logout' %}" method="post">
                {% csrf_token %}
                <button type="submit" class="btn btn-link text-danger text-decoration-none w-100 text-start px-4">
                    <i class="fas fa-sign-out-alt"></i> Terminar Sessão
                </button>
            </form>
        </div>
        {% if user.is_superuser %}
    <hr class="sidebar-divider">
    
    <div class="sidebar-heading" style="text-align: center; color: #ffff00; width: 100%;">
        Administração
    </div>
    
    <li class="nav-item">
        <a class="nav-link" href="{% url 'gerir_utilizadores' %}">
            <i class="fas fa-users-cog"></i>
            <span>Gerir Utilizadores</span>
        </a>
    </li>
{% endif %}
    </nav>
    <main class="main-content">
        {% block content %}
        {% endblock %}
    </main>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    {% block scripts %}
    {% endblock %}
</body>
</html>